<!DOCTYPE html>
<html>
<head>
    <title>Hồ sơ người dùng</title>
</head>
<body>
<h1>Hồ sơ người dùng</h1>
<div id="profileInfo">
</div>
<script>
    const token = localStorage.getItem('authToken');
    if (!token) {
        alert('Bạn cần đăng nhập để xem hồ sơ.');
        window.location.href = '/login.html';
    } else {
        fetch('http://localhost:8090/user/profile', {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + token
            }
        })
            .then(response => {
                if(response.ok){
                    return response.json();
                }
                throw new Error('Không thể lấy thông tin profile.');
            })
            .then(data => {
                document.getElementById('profileInfo').innerHTML = `
                    <p>ID: ${data.id}</p>
                    <p>Tên người dùng: ${data.username}</p>
                    <p>Họ tên: ${data.hoTen}</p>
                    <p>Email: ${data.email}</p>
                    <p>Số điện thoại: ${data.soDienThoai}</p>
                    <p>Vai trò: ${data.role}</p>
                `;
            })
            .catch(error => {
                console.error('Lỗi lấy thông tin hồ sơ:', error);
                alert('Lỗi lấy thông tin hồ sơ.');
                localStorage.removeItem('authToken');
                window.location.href = '/login.html';
            });
    }
</script>
</body>
</html>